#!/usr/bin/env python3
#
# usage: plash-dockerd <DOCKER_ARGS>

from plashlib.utils import handle_help_flag
from os import execlp, environ

handle_help_flag()

socket = environ.get(
    'PLASH_DOCKER_SOCKET',
    '/tmp/docker.sock')

execlp(
    'plash-run',
    'plash-run',
    '-A',
    'docker',
    '--',
    '--root',
    '--mount',
    'default,cgroup',
    'env',
    'DOCKER_RAMDISK=1',
    'dockerd',
    '-H',
    'unix://{}'.format(socket))
