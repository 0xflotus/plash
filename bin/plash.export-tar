#!/bin/sh

# usage: plash export-tar CONTAINER [FILE | - ]
#
# Exports the file system of a container to the given file as a compressed tar archive.
# If no file is supplied or the file is '-' the tar archive wil be printed to stdout instead.

set -eu

if [ "$*" == --help ]; then
  exec plash.help $0
elif ! [ $# -ge 1 ]; then
  plash.help --usage $0
  exit 2
fi

exec plash.with-mount $1 tar -czf "${2:--}" .
