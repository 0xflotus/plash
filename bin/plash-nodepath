#!/usr/bin/env python3
#
# usage: plash-nodepath CONTAINER
# Prints the location of the last layer of a container.
# Example: `plash-nodepath mycontainer | xargs tree`


import os
import sys

from plashlib.utils import die, handle_help_flag, die_with_usage, catch_and_die, handle_build_args, nodepath_or_die
from plashlib import ux

PLASH_DATA = os.environ.get('PLASH_DATA', '/var/lib/plash')

handle_help_flag()
handle_build_args()
ux.assert_is_root()

try:
    container = sys.argv[1]
except IndexError:
    die_with_usage()

nodepath = nodepath_or_die(container)
print(nodepath)
