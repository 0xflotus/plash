#!/usr/bin/env python3
from plash.utils import setup_sigint_handler; setup_sigint_handler()

import inspect
import os
import sys

import plash
from plash import utils

args = sys.argv[1:]

# "do run" is used as default command when no other was given
if args[0].startswith('-'):
    args = ['do', 'run'] + args

subcommand = args[0]
subcommand_args = args[1:]

subcommand_executable = utils.get_subcommand_path(subcommand)
try:
    os.execvpe(
        subcommand_executable,
        [subcommand_executable] + subcommand_args,
        os.environ)
except FileNotFoundError:
    raise
    print('No subcommand {}, available')
