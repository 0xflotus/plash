#!/usr/bin/env python3

import inspect
import os
import sys

import plash
from plash import utils

subcommand = sys.argv[1]
subcommand_args = sys.argv[2:]

subcommand_executable = utils.get_subcommand_path(subcommand)
try:
    os.execvpe(
        subcommand_executable,
        [subcommand_executable] + subcommand_args,
        os.environ)
except FileNotFoundError:
    all_subcommands = os.listdir(subcommands_dir)
    print('No subcommand {}, available: {}'.format(repr(subcommand), ' '.join(sorted(all_subcommands))))
