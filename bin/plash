#!/bin/sh
set -eu

[ $# -eq 0 ] && {
    echo "Plash is a lean container build system, try --help" >&2
    exit 2
}

cmd=$1
shift
case $cmd in
-*)
    # "do run" is used as default command, when no other was given
    exec $0.do run "$cmd" "$@" ;;

*)
    command -v $0.$cmd >/dev/null 2>&1 || {
        echo >&2 "Subcommand '$cmd' not found, try --help"
        exit 1
    }
    exec $0.$cmd "$@" ;;

esac
