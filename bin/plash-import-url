#!/bin/sh

# usage: plash import-url URL NEW-IMAGE-ID
# Import an url as container

set -eu

test "$*" == --help && exec plash-help "$0"
test $# -eq 2 || {
  plash-help --usage "$0"
  exit 2
}

url="$1"
image_id="$2"
tmpdir=$(mktemp -d)
cd $tmpdir

if wget --help 2>&1 | grep -- --show-progress; then
  wget -q --show-progress $url -O $image_id
else
  wget $url -O $image_id
fi

exec plash-import-tar $image_id $image_id
